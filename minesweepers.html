<!DOCTYPE html>
<html>
<head>
  <style>
    #game-board {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      grid-template-rows: repeat(10, 1fr);
      grid-gap: 1px;
      background-color: #ddd;
    }

    .cell {
      background-color: #eee;
      border: 1px solid #999;
      text-align: center;
      vertical-align: middle;
      font-size: 20px;
      font-weight: bold;
    }

    .cell.hidden {
      background-color: #bbb;
    }

    .cell.mine {
      background-color: red;
      color: white;
    }

    .cell.flagged {
      background-color: yellow;
    }

  </style>
  <title>Minesweeper Game</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <h1>Minesweeper Game</h1>
  <div id="game-board"></div>
  <button onclick="startGame()">Start Game</button>
  <button onclick="resetGame()">Reset Game</button>
  <script>
    const boardSize = 10;
    const numMines = 10;


    let board = [];
    let gameIsOver = false;


    function generateBoard() {
      board = Array.from({
        length: boardSize
      }, () =>
        Array.from({
          length: boardSize
        }, () => ({
            isMine: false,
            isRevealed: false,
            isFlagged: false,
            neighborCount: 0
          }))
      );


      let minesPlaced = 0;
      while (minesPlaced < numMines) {
        let x = Math.floor(Math.random() * boardSize);
        let y = Math.floor(Math.random() * boardSize);

        if (!board[x][y].isMine) {
          board[x][y].isMine = true;
          minesPlaced++;
        }
      }

      board.forEach((row, rowIndex) => {
        row.forEach((cell, colIndex) => {
          cell.neighborCount = countNeighborMines(rowIndex, colIndex);
        });
      });

    }


    function countNeighborMines(row, col) {
      let count = 0;


      for (let i = -1; i <= 1; i++) {
        for (let j = -1; j <= 1; j++) {
          if (i === 0 && j === 0) continue;

          let neighborRow = row + i;
          let neighborCol = col + j;

          if (
            neighborRow < 0 ||
            neighborRow >= boardSize ||
            neighborCol < 0 ||
            neighborCol >= boardSize
          )
            continue;

          if (board[neighborRow][neighborCol].isMine) count++;
        }
      }

      return count;

    }


    function revealCell(row, col) {
      if (board[row][col].isRevealed) return;


      board[row][col].isRevealed = true;

      if (board[row][col].isMine) {
        gameOver();
        return;
      }

      if (board[row][col].neighborCount === 0) {
        for (let i = -1; i <= 1; i++) {
          for (let j = -1; j <= 1; j++) {
            if (i === 0 && j === 0) continue;

            let neighborRow = row + i;
            let neighborCol = col + j;

            if (
              neighborRow < 0 ||
              neighborRow >= boardSize ||
              neighborCol < 0 ||
              neighborCol >= boardSize
            )
              continue;

            if (!board[neighborRow][neighborCol].isRevealed) {
              revealCell(neighborRow, neighborCol);
            }
          }
        }
      }

    }


    function flagCell(row, col) {
      if (board[row][col].isRevealed) return;


      board[row][col].isFlagged = !board[row][col].isFlagged;

    }


    function checkForWin() {
      let numUnrevealed = 0;


      board.forEach((row, rowIndex) => {
        row.forEach((cell, colIndex) => {
          if (!cell.isRevealed) numUnrevealed++;
        });
      });

      if (numUnrevealed === numMines) {
        gameIsOver = true;
        alert("Congratulations! You win!");
      }

    }


    function gameOver() {
      gameIsOver = true;


      board.forEach((row, rowIndex) => {
        row.forEach((cell, colIndex) => {
          if (cell.isMine) {
            board[rowIndex][colIndex].isRevealed = true;
          }
        });
      });

      alert("Game Over!");

    }


    function renderBoard() {
      let gameBoard = document.getElementById("game-board");
      gameBoard.innerHTML = "";


      board.forEach((row,
        rowIndex) => {
        row.forEach((cell, colIndex) => {
          let cellElement = document.createElement("div");
          cellElement.classList.add("cell");
          if (!cell.isRevealed) {
            cellElement.classList.add("hidden");
            if (cell.isFlagged) {
              cellElement.innerHTML = "ðŸš©";
              cellElement.classList.add("flagged");
            }
          } else {
            if (cell.isMine) {
              cellElement.innerHTML = "ðŸ’£";
              cellElement.classList.add("mine");
            } else if (cell.neighborCount > 0) {
              cellElement.innerHTML = cell.neighborCount;
            }
          }

          cellElement.addEventListener("click", () => {
            if (gameIsOver) return;

            revealCell(rowIndex, colIndex);
            checkForWin();
            renderBoard();
          });

          cellElement.addEventListener("contextmenu",
            (event) => {
              event.preventDefault();
              if (gameIsOver) return;

              flagCell(rowIndex, colIndex);
              renderBoard();
            });

          gameBoard.appendChild(cellElement);
        });
      });

    }


    function startGame() {
      gameIsOver = false;
      generateBoard();
      renderBoard();
    }


    function resetGame() {
      gameIsOver = false;
      generateBoard();
      renderBoard();
    }
  </script>
</body>
</html>